<script type="text/javascript">
	angular.module('pencilblueApp', [])
	.controller('PencilBlueController', function($scope, $http, $timeout) {
		^angular_objects^
		^tmp_angular=admin=elements=error_success^

		$scope.savePluginSettings = function() {
			$scope.saving = true;

			var settingsObject = {};
			for(var i = 0; i < $scope.settings.length; i++) {
				settingsObject[$scope.settings[i].name] = $scope.settings[i].value;
			}

			$http.post('/admin/' + $scope.type + '/' + $scope.pluginUID + '/settings', settingsObject)
			.then(function({data: result}) {
				$scope.successMessage = result.message;
				$scope.saving = false;
			})
			.catch(function({data: error, status}) {
				$scope.errorMessage = error.message;
				$scope.saving = false;
			});
		}
	});
</script>
